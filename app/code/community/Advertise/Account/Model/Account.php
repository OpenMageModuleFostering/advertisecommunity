<?php

ini_set('memory_limit', '1280M');

class Account extends Mage_Core_Model_Abstract {

    public $_indexPhp = '';

    protected $_filePath;
    public $_limit = false;
    public $_display = false;
    public $_rates = false;
    public $_sqlSize = 1500;


    protected function _construct() {
        $this->_init('advertise/account');
    }

    private function execPhpScript($myPattern, $product, $xml=true) {

        $myPattern = str_replace('<?', utf8_encode('¤'), $myPattern);
        $myPattern = str_replace('?>', utf8_encode('¤'), $myPattern);
        $pattern = utf8_encode('/(¤(.[^¤]+)¤)/s');
        preg_match_all($pattern, $myPattern, $matches);
        if (isset($matches[1])) {

            foreach ($matches[1] as $key => $script) {

                if ($xml == 1) {
                    if (@eval($matches[2][$key] . ';'))
                        $myPattern = str_replace($script, eval($matches[2][$key] . ';'), $myPattern);
                    else
                        $myPattern = str_replace($script, '', $myPattern);
                }
                else {
                    if (@eval($this->unescapeStr($matches[2][$key] . ';')))
                        $myPattern = str_replace($script, $this->escapeStr(eval($this->unescapeStr($matches[2][$key]) . ';')), $myPattern);
                    else
                        $myPattern = str_replace($script, '', $myPattern);
                }
            }
        }
        return $myPattern;
    }

    public function x0b($x0b, $x0c) {$x0d = $this->_currencies;if (isset($x0d[$x0c]))return $x0b * $x0d[$x0c];else {return $x0b;}}public function x0c($x0b, $x0e, $x0f, $x10=false) {$x11 = $this->_rates; if ($x10 === false) {if (!$x0e && isset($x11[$x0f])) {if (count($x11[$x0f]) > 1) {return $x0b;} else {return $x0b * ($x11[$x0f][0]['rate'] / 100 + 1);}} else {return $x0b;}} elseif ($x10 === "0") { if ($x0e && isset($x11[$x0f])) {if (count($x11[$x0f]) > 1) {return $x0b;} else {return 100 * $x0b / (100 + ($x11[$x0f][0]['rate']));}} else {return $x0b;}} else { if (is_numeric($x10)) {if ($x0f != 0) {return $x0b * ($x10 / 100 + 1);} elseif ($x0f == 0) {return $x0b;}} else {$x10 = explode('/', $x10);$x12 = 0;$x13 = false;if (substr($x10[0], 0, 1) == "\055") {$x10[0] = substr($x10[0], 1);$x13 = true;}if ($x11[$x0f]) {foreach ($x11[$x0f] as $x14) {if ($x14['country'] == $x10[0]) {if (!isset($x10[1]) || $x14['code'] == $x10[1]) {$x12 = $x14['rate'];break;}}}if (!$x13)return $x0b * ($x12 / 100 + 1);else {return 100 * $x0b / (100 + ($x12));}} else {return $x0b;}}}}public function x0d($x15, $x16=true) {$x17 = '/(<[^>^\/]+>)([^<]*)(<\/[^>]+>)/s';preg_match_all($x17, $x15, $x18);foreach ($x18[1] as $x19 => $x1a) {$x1b = trim($x18[2][$x19]);if (empty($x1b) && !is_numeric($x1b))$x15 = str_replace($x18[0][$x19], '', $x15);else {if ($x16)$x15 = str_replace($x18[0][$x19], ($x18[1][$x19]) . '<![CDATA[' . $x1b . ']]>' . ($x18[3][$x19]), $x15);else$x15 = str_replace($x18[0][$x19], ($x18[1][$x19]) . $x1b . ($x18[3][$x19]), $x15);}}$x1c = preg_split("/\n/\163", $x15);$x1d = '';foreach ($x1c as $x1e) {(strlen(trim($x1e)) > 0) ? $x1d.=$x1e . "\n" : false;}$x15 = $x1d;return $x15;}public function x0e($x15) {if ($this->_display)return ($x15);else {if ($this->_chartset == 'ISO')return utf8_decode($x15);else {return ($x15);}}}public function x0f($x1f, $x20) {if (($x1f == "p\x61\162\x65\x6e\164" || $x1f == "\x63o\156fi\x67\x75\x72a\x62\154\145") && isset($this->configurable[$x20->getId()]))return $this->configurable[$x20->getId()];elseif (($x1f == "\x70\141r\x65n\164" || $x1f == "g\162\157\165p\145d") && isset($this->grouped[$x20->getId()]))return $this->grouped[$x20->getId()];elseif (($x1f == "parent" || $x1f == "b\165\156\144\x6ce") && isset($this->bundle[$x20->getId()]))return $this->bundle[$x20->getId()];else {return $x20;}}public function x10($x21, $x22, $x23=0) {$this->_debug = (isset($_GET['debug'])) ? true : false;$this->_limit = $x23;$x24 = $this->_indexPhp;try {$x25 = Mage::getStoreConfig("\141d\166\x65rt\x69\x73\145/\x61\x64\166e\162\x74\x69s\145\x2fact\151\166a\164\x65d", $x21);if ($x25) { $x26 = pack("\110*", Mage::getStoreConfig("\x61\x64\166e\162\x74\151s\145\x2f\x61\144\x76\x65\162\x74\x69\163\145\x2fte\155\160\154\141\164\x65", $x21)); $x27 = Mage::getStoreConfig("\141\x64ve\162\164i\x73e/\x61\x64\x76\x65\162t\x69\163\145\057\x66\x69\x6c\145\160\141\164\150", $x21); $x28 = Mage::getStoreConfig("a\x64\x76er\x74\151s\145\057\x61\144\x76\x65\x72\x74\151se\057f\x69\x6c\145\x6e\x61m\145", $x21);$x29 = Mage::getStoreConfig("\x77\145\142\x2fs\x65c\x75\162\145\x2f\x62a\163e\x5f\x75\162\x6c");$x2a = Mage::getStoreConfig("a\144v\145\x72\x74\x69\x73\x65\057a\x64\x76\x65rt\x69\163e/\154\x69ce\x6e\x73\145");$x2b = array("l" => "\154e\166e\x6e\163\150\x74e\151\156\137\x63\x6f\155p\141\x72\145\x5fst\162\151n\x67"); $x29 = preg_replace("\057\x68\164\x74\x70\x73\077\x3a\/\/\057", '', $x29);} else {Mage::throwException(sprintf('The store "%d" is not activated!', $x21));}} catch (Exception $x2c) {Mage::throwException(sprintf('The store "%d" is not activated!', $x21));}if ($this->_debug) {echo "\x3c\142\x72\076\074b\162>\x2d---\x2d\x2d--\055\055\x2d\055\040\x58\x4dL\x20\120ATT\x45\122N \055--\055-\055--\x2d\055\055\055\055\055\055\x2d\x3c\142\162>";echo htmlentities($x26) . "<br\057\x3e";echo "\x3cb\162\076\x3c\142\x72\x3e\055-\x2d\055\055\x2d\x2d\x2d----\040F\x49LE\x20\x50A\124\110\040\x2d-\x2d\055\x2d\x2d\x2d\x2d--\x2d\x2d\055\055\055\055\x3cb\162>";echo $x27 . "\x3c\142\x72\x2f>";echo "\074\x62\x72\x3e<\142\162\076-\x2d\x2d---\x2d-\x2d-\x2d\055\040\x46\x49\114ENA\115\x45\x20 \055\x2d\x2d\x2d\x2d\x2d\x2d\x2d\055\x2d\055\x2d\055\x2d\055\x2d\074\x62r>";echo $x28 . "\074b\162\057\076\074b\162\057>";}while (strlen($x29) < 10) {$x29 .= $x29;}$x2d = levenshtein($x29, $x2b["\x6c"]);$x2e = bin2hex($x29);$x2f = $x21; $x30 = Mage::getStoreConfig("\x63\x61t\141l\x6f\147/\x70\x6c\x61\x63e\x68\157\x6c\144\x65\162\057\151ma\147\145\x5f\160\x6c\141ce\150\157\x6cd\145\x72", $x2f);$x31 = Mage::getStoreConfig("\x63u\x72rency/\x6f\160\x74i\x6fn\163\057b\141s\x65", $x2f);$x32 = Mage::app()->getStore($x2f)->getBaseUrl(Mage_Core_Model_Store::URL_TYPE_WEB, false);$x33 = Mage::app()->getStore($x2f)->getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA, false);$x34 = Mage::getStoreConfig(Mage_Tax_Model_Config::CONFIG_XML_PATH_PRICE_INCLUDES_TAX, $x2f);$x35 = Mage::app()->getStore($x2f)->getRootCategoryId(); $x36 = Array();$x36[] = '*'; $x37 = array('simple', 'configurable', 'bundle', 'grouped', 'virtual', 'downloadable');$x38 = array(1, 2, 3, 4);$x39 = str_split($x2e);$x3a = "";$x3b = "";$x3c = "";$x3b = ('<?xml version="1.0" encoding="utf-8" ?>' . "\n<f\x65\145\x64I\x74e\155\x73\x3e\n");$x3c = $this->x0e($x3b);$x3d = "";$x17 = '/{([a-zA-Z_0-9:]+)(\sparent|\sgrouped|\sconfigurable|\sbundle)?([^}]*)}/';preg_match_all($x17, $x26, $x18);$x3e = array();$x3f = array();foreach ($x18[1] as $x19 => $x40) {$x3e[$x19]['methodName'] = "\x67e\x74" . str_replace(' ', '', ucwords(trim($x40)) . '()');$x3e[$x19]['pattern'] = "\173" . trim($x40) . "\175";$x3e[$x19]['fullpattern'] = $x18[0][$x19];$x3e[$x19]['name'] = trim($x40);$x3e[$x19]['reference'] = trim($x18[2][$x19]);if (empty($x3e[$x19]['reference']))$x3e[$x19]['reference'] = 'self';switch ($x3e[$x19]['name']) {case 'G:IMAGE_LINK':array_push($x3f, 'image');array_push($x3f, 'small_image');array_push($x3f, 'thumbnail');break;default : array_push($x3f, $x3e[$x19]['name']);}$x3e[$x19]["\166\141\x6c\x75\x65"] = '$x20->get' . $x3e[$x19]['name'] . "(\x29";$x3e[$x19]["t\145xt"] = '$x20->getAttributeText(\'' . trim($x40) . '\')';$x41 = '/\[([^\]]+)\]/';preg_match_all($x41, $x18[3][$x19], $x42);$x3e[$x19]["\157p\x74\x69o\156s"] = $x42[1];}$x1c = $x39;for ($x43 = 0; $x43 < count($x39); $x43++) {$x44 = $x1c[$x43] . $x1c[++$x43];$x45 = hexdec($x44);$x46 = $x45 + ($x43 / 2) * $x2d;$x47 = dechex($x46);if (strlen($x47) > 2) {$x48 = substr($x47, -2);} else {$x48 = $x47;}$x3d .= strtoupper($x48);}if ($this->_debug) {echo "-\x2d\x2d\055-\x2d--\x2d--\055\055\x2d\x2d\055\055\x2d\x2d\x2d-\055--\x2d\x2d\055\055\055\x2d\x2d-\x2d\x2d\055\x2d--\x2d\x2d\055\055\x2d\055\x2d\055<\142\162\076\015\012\040\040   \x20\040 \x20  \x20\040\040\040\x20\x20\040\040\x2d\x2d-\x2d\x2d\x2d\055-\055\055-\055\x20\104\105\102UG M\x4f\x44\x45 \x2d\055\x2d\055\x2d\055\x2d\x2d\x2d-\055---\055\055\074\142\x72>\x0a \x20\040\x20\040\040\x20      \x20\x20\040\040  \x2d\055\055\055\055-\055\x2d\055-\055\x2d--\055\055\x2d-\055\055--\x2d\x2d\055-\055-\x2d\055-\x2d\055-\x2d--\x2d-\055---\055-\055\074\142r><\142\162\x3e";echo "\x3c\142\x72\076<br\x3e-\x2d----\055\055---\x2d\x20A\x54\x54\x52\111\x42U\x54ES\040\055\x2d-\x2d-\055\055----\x2d\055--\055\074\x62\162\076";print_r($x3e);}$x49 = Mage::getModel('catalog/category')->getCollection()->setStoreId($x2f)->addAttributeToSelect('name', 'store_id')->addAttributeToSelect('is_active');$x4a = array();foreach ($x49 as $x4b) {$x4a[$x4b->getId()]['name'] = $x4b->getName();$x4a[$x4b->getId()]['path'] = $x4b->getPath();$x4a[$x4b->getId()]['level'] = $x4b->getLevel();}if ($this->_debug) {echo "\074\x62\162\x3e<b\162\x3e\x2d-\x2d----\055\x2d\055\x2d\x2d\x20C\x41\x54\x45\107OR\x49\x45\123 \055\x2d\055\055\x2d\055\055\x2d\055\x2d\055\055\x2d\x2d\x2d\x2d\x3c\142\162>";print_r($x4a);}$x4c = Mage::getSingleton('core/resource');$x4d = $x4c->getConnection('core_read');$x4e = $x4c->getTableName('eav_entity_type');$x4f = $x4d->select()->from($x4e)->where('entity_type_code=\'catalog_product\'');$x50 = $x4d->fetchAll($x4f);$x51 = $x50[0]['entity_type_id'];$x4c = Mage::getSingleton('core/resource');$x4d = $x4c->getConnection('core_read');$x52 = $x4c->getTableName('directory_currency_rate');$x4f = $x4d->select()->from($x52)->where('currency_from=\'' . $x31 . '\'');$x53 = str_split($x3d);$x1c = $x53;for ($x43 = 0; $x43 < count($x53); $x43+=count($x53) / 24) {$x3a .= $x1c[$x43];}$x3a = strtoupper(md5($x3a));$x0d = $x4d->fetchAll($x4f);$x54 = array();foreach ($x0d as $x0c) {$x54[$x0c['currency_to']] = $x0c['rate'];}$this->_currencies = $x54;if ($this->_debug) {echo "<br><\142\162\076-\055\055\x2d\055--\x2d\055\x2d\055\x2d\x20\103\125R\x52\x45\x4eC\x49\x45\x53\040-\055\x2d\055\x2d\x2d\055-\055\x2d\055\055\x2d\055\x2d\x2d\x3c\x62r\x3e";print_r($x54);}$x55 = Mage::getResourceModel('eav/entity_attribute_collection')->setEntityTypeFilter($x51)->addSetInfo()->getData();$x56 = $x3a != $x2a;$x57 = array();$x58 = array();foreach ($x55 as $x19 => $x40) {if (in_array($x40['attribute_code'], $x3f)) {array_push($x57, $x40['attribute_code']);$x58[$x40['attribute_code']] = $x40['frontend_input'];}}$x59 = $x3a != $x22;if (!in_array('special_price', $x57))$x57[] = 'special_price';if (!in_array('special_from_date', $x57))$x57[] = 'special_from_date';if (!in_array('special_to_date', $x57))$x57[] = 'special_to_date';if (!in_array('price_type', $x57))$x57[] = 'price_type';if (!in_array('price', $x57))$x57[] = 'price';$x57[] = 'tax_class_id';if ($this->_debug) {echo "\x3c\142\162\076\074\142r\x3e\x2d\x2d\x2d\055\x2d\055---\x2d\055\055\x20\101\x54\x54R\111\102\x55\x54\x45\x53\040\x2d-\055\x2d-\055\x2d-\055\x2d\055\055-\x2d\055-\074b\x72>";print_r($x57);}if ($x56 || $x59){Mage::throwException("T\x68\x65\x20\154\x69\x63e\156\163\x65\x20\x6e\165\155be\x72\x73 \144\157\x6e'\x74\x20\x6d\x61\164c\x68\x21");}$x4c = Mage::getSingleton('core/resource');$x4d = $x4c->getConnection('core_read');$x5a = $x4c->getTableName('eav_attribute_option_value');$x4f = $x4d->select();$x4f->from($x5a);$x4f->where("s\x74o\162\x65_\151\144\075" . $x2f . ' OR  store_id=0');$x4f->order(array('option_id', 'store_id'));$x5b = $x4d->fetchAll($x4f);foreach ($x5b as $x5c) {$x5d[$x5c['option_id']][$x5c['store_id']] = $x5c['value'];}$x5e = $x4c->getTableName('tax_class');$x5f = $x4c->getTableName('tax_calculation');$x60 = $x4c->getTableName('tax_calculation_rate');$x61 = $x4c->getTableName('directory_country_region');$x4f = $x4d->select();$x4f->from($x5e)->order(array('class_id', 'tax_calculation_rate_id'));$x4f->joinleft(array('tc' => $x5f), 'tc.product_tax_class_id = ' . $x5e . '.class_id', 'tc.tax_calculation_rate_id');$x4f->joinleft(array('tcr' => $x60), 'tcr.tax_calculation_rate_id = tc.tax_calculation_rate_id', array('tcr.rate', 'tax_country_id', 'tax_region_id'));$x4f->joinleft(array('dcr' => $x61), 'dcr.region_id=tcr.tax_region_id', 'code');$x62 = $x4d->fetchAll($x4f);$x11 = array();$x63 = '';foreach ($x62 as $x64) {if ($x63 != $x64['class_id'])$x65 = 0;else {$x65++;}$x63 = $x64['class_id'];$x11[$x64['class_id']][$x65]['rate'] = $x64['rate'];$x11[$x64['class_id']][$x65]['code'] = $x64['code'];$x11[$x64['class_id']][$x65]['country'] = $x64['tax_country_id'];}$this->_rates = $x11;if ($this->_debug) {echo "\x3c\x62\x72\x3e\x3c\142\x72\076\055\055-\055\055\x2d\x2d-\x2d-\055\x2d\x20\124\x41\130\x20\103L\x41\x53\x53 --\x2d\x2d\x2d\055-\x2d\055--\x2d\x2d\055\x2d-\074b\162\076";print_r($x11);}$x66 = $x4c->getTableName('review');$x67 = $x4c->getTableName('review_store');$x68 = $x4c->getTableName('rating_option_vote');$x69 = $x4d->select()->distinct('review_id');$x69->from(array("r" => $x66), array("C\117\125\x4e\x54\050\104\x49\x53TI\116\x43T\x20r\x2er\145v\151e\x77\137\x69\144\051\040\x41S\x20\x63ou\x6et", 'entity_pk_value'));$x69->joinleft(array('rs' => $x67), 'rs.review_id=r.review_id', 'rs.store_id');$x69->joinleft(array('rov' => $x68), 'rov.review_id=r.review_id', 'AVG(rov.percent) AS score');$x69->where("\163\x74a\x74\165\x73_id\x3d1 \x61\x6e\144\x20\x65n\x74\x69\x74\171\x5fid=1");$x69->group(array('r.entity_pk_value', 'rs.store_id'));$x6a = $x4d->select();$x6a->from(array("\x72" => $x66), array("\103\x4fU\x4e\124\050DIST\111\116C\124 r\056r\145\x76i\145w\137\151d)\040\101S\x20\x63o\165n\x74", 'entity_pk_value', "\050SEL\x45C\x54\040\060\x29 \x41\123  \163\x74\x6f\x72\145\x5fi\x64"));$x6a->joinleft(array('rs' => $x67), 'rs.review_id=r.review_id', array());$x6a->joinleft(array('rov' => $x68), 'rov.review_id=r.review_id', 'AVG(rov.percent) AS score');$x6a->where("\x73\164\141\164\x75s\137\x69d\x3d1\040\x61n\144\x20\x65\156\164\x69\164y_\151\x64=1");$x6a->group(array('r.entity_pk_value'));$x4f = $x4d->select()->union(array($x69, $x6a));$x4f->order(array('entity_pk_value', 'store_id'));$x6b = $x4d->fetchAll($x4f);$x6c = array();foreach ($x6b as $x6d) {$x6c[$x6d['entity_pk_value']][$x6d['store_id']]['count'] = $x6d['count'];$x6c[$x6d['entity_pk_value']][$x6d['store_id']]['score'] = $x6d['score'];}$x4c = Mage::getSingleton('core/resource');$x4d = $x4c->getConnection('core_read');$x6e = $x4c->getTableName('catalog_product_entity_media_gallery');$x6f = $x4c->getTableName('catalog_product_entity_media_gallery_value');$x4f = $x4d->select();$x4f->from($x6e);$x4f->joinleft(array('cpemgv' => $x6f), 'cpemgv.value_id = ' . $x6e . '.value_id', array('cpemgv.position', 'cpemgv.disabled'));$x4f->where("\166\x61lu\145\x3c\x3eT\x52IM\050''\x29\040\x41\x4e\x44\040(\x73t\x6f\162\x65_id\075" . $x2f . ' OR  store_id=0)');$x4f->order(array('position', 'value_id'));$x70 = $x4d->fetchAll($x4f);foreach ($x70 as $x71) {$x72[$x71['entity_id']]['src'][] = $x71['value'];$x72[$x71['entity_id']]['disabled'][] = $x71['disabled'];}if ($this->_debug) {echo "\x3c\142\162\076<\x62\x72>\055\055\x2d\x2d\x2d\055\055\055\x2d-\055\055\040\111\115\101\107E\123\040\x2d\055\055\x2d\x2d\055\x2d\055--\x2d\x2d\x2d\055\x2d-<\142r\x3e";print_r($x72);}$x73 = $x4c->getTableName("\x63\x61\164a\x6c\x6f\x67\151\156\166\x65nt\x6f\162y\137\163t\x6f\143k_\x69\x74\x65\x6d");$x74 = $x4c->getTableName("\x63\157\x72e\x5fur\154\137\162\x65\x77\162\151\x74e");$x52 = $x4c->getTableName('catalog_category_product');$x75 = $x4c->getTableName('catalog_category_product_index');$x76 = $x4c->getTableName('catalog_product_index_price');$x77 = $x4c->getTableName('catalog_product_super_link');$x78 = $x4c->getTableName('catalog_product_link');$x79 = $x4c->getTableName('catalog_product_bundle_selection');$x7a = Mage::getModel('catalog/product')->getCollection()->addStoreFilter($x2f);$x7a->addAttributeToFilter('status', 1);$x7a->addAttributeToFilter('type_id', array("i\156" => "\143o\x6ef\151\x67ur\x61b\154\145"));$x7a->addAttributeToFilter('visibility', array("\x6e\x69\156" => 1));$x7a->addAttributeToSelect($x57);$x7a->getSelect()->joinLeft($x77 . ' AS cpsl', 'cpsl.parent_id=e.entity_id ', array('child_ids' => 'GROUP_CONCAT( DISTINCT cpsl.product_id)'));$x7a->getSelect()->joinLeft($x73 . ' AS stock', 'stock.product_id=e.entity_id', array('qty' => 'qty', 'is_in_stock' => 'is_in_stock'));$x7a->getSelect()->joinLeft($x74 . ' AS url', 'url.product_id=e.entity_id AND url.category_id IS NULL AND is_system=1 AND options<> "RP" AND url.store_id=' . $x2f, array('request_path' => 'request_path'));$x7a->getSelect()->joinLeft($x52 . ' AS categories', 'categories.product_id=e.entity_id');$x7a->getSelect()->joinLeft($x75 . ' AS categories_index', 'categories_index.category_id=categories.category_id AND  categories_index.product_id=categories.product_id AND categories_index.store_id=' . $x2f, array('categories_ids' => 'GROUP_CONCAT( DISTINCT categories_index.category_id)'));$x7a->getSelect()->group(array('cpsl.parent_id'));$x7b = array();foreach ($x7a as $x7c) {foreach (explode("\054", $x7c->getChildIds()) as $x7d) {$x7b[$x7d] = $x7c;$x7e[$x7d]['categories_ids'] = $x7c->getCategories_ids();$x7e[$x7d]['parent_id'] = $x7c->getId();$x7e[$x7d]['parent_sku'] = $x7c->getSku();$x7e[$x7d]['parent_request_path'] = $x7c->getRequestPath();}}$this->configurable = $x7b;if ($this->_debug) {echo "\074br\076\074\x62\162>\055\055\055\x2d\x2d--\x2d\055-\055- \x43O\x4e\x46\x49\x47U\122\101\102\114\105\123\040\x2d-\x2d-\055--\x2d--\055-\055\055\055\x2d<\142\x72\x3e";echo $x7a->getSelect() . '<br><br>';print_r($x7e);}$x7a = Mage::getModel('catalog/product')->getCollection()->addStoreFilter($x2f);$x7a->addAttributeToFilter('status', 1);$x7a->addAttributeToFilter('type_id', array("in" => "c\157n\146\151g\x75\162\x61\142\x6c\x65"));$x7a->addAttributeToFilter('visibility', array("\x6e\151n" => 1));$x7a->getSelect()->joinLeft($x77 . ' AS cpsl', 'cpsl.parent_id=e.entity_id ');$x7a->getSelect()->joinLeft($x73 . ' AS stock', 'stock.product_id=cpsl.product_id', array('qty' => 'SUM(qty)'));$x7a->getSelect()->group(array('cpsl.parent_id'));$x7f = array();foreach ($x7a as $x80) {$x7f[$x80->getId()] = $x80->getQty();}$this->configurableQty = $x7f;if ($this->_debug) {echo "\x3c\x62r\076\074\x62\162\x3e\x2d--\055\x2d\x2d\x2d\x2d\055\055\055-\x20\x43\117N\106IGU\x52A\102LES\x20\x51\x54\131 \055\055--\x2d\x2d\x2d\x2d\055\x2d-\055\055\055\055-\x3cb\162>";echo $x7a->getSelect() . '<br><br>';print_r($x7f);}$x7a = Mage::getModel('catalog/product')->getCollection()->addStoreFilter($x2f);$x7a->addAttributeToFilter('status', 1);$x7a->addAttributeToFilter('type_id', array("in" => "\x67\162o\x75\x70e\x64"));$x7a->addAttributeToFilter('visibility', array("n\x69\156" => 1));$x7a->addAttributeToSelect($x57);$x7a->getSelect()->joinLeft($x78 . ' AS cpl', 'cpl.product_id=e.entity_id AND cpl.link_type_id=3', array('child_ids' => 'GROUP_CONCAT( DISTINCT cpl.linked_product_id)'));$x7a->getSelect()->joinLeft($x73 . ' AS stock', 'stock.product_id=e.entity_id', array('qty' => 'qty', 'is_in_stock' => 'is_in_stock'));$x7a->getSelect()->joinLeft($x74 . ' AS url', 'url.product_id=e.entity_id AND url.category_id IS NULL AND is_system=1 AND options<> "RP" AND url.store_id=' . $x2f, array('request_path' => 'request_path'));$x7a->getSelect()->joinLeft($x52 . ' AS categories', 'categories.product_id=e.entity_id');$x7a->getSelect()->joinLeft($x75 . ' AS categories_index', 'categories_index.category_id=categories.category_id AND  categories_index.product_id=categories.product_id AND categories_index.store_id=' . $x2f, array('categories_ids' => 'GROUP_CONCAT( DISTINCT categories_index.category_id)'));$x7a->getSelect()->group(array('cpl.product_id'));$x81 = array();foreach ($x7a as $x7c) {foreach (explode("\x2c", $x7c->getChildIds()) as $x7d) {$x81[$x7d] = $x7c;$x82[$x7d]['categories_ids'] = $x7c->getCategories_ids();$x82[$x7d]['parent_id'] = $x7c->getId();$x82[$x7d]['parent_sku'] = $x7c->getSku();$x82[$x7d]['parent_request_path'] = $x7c->getRequestPath();}}$this->grouped = $x81;if ($this->_debug) {echo "\x3cbr>\074\142\162\x3e\055-\055\055\x2d\055--\x2d\x2d\055\x2d \x47RO\x55\120ED\040\x2d-\x2d-\055\x2d\x2d\x2d\055-\055-\055\055\x2d-\x3c\x62r>";echo $x7a->getSelect() . '<br><br>';print_r($x82);}$x7a = Mage::getModel('catalog/product')->getCollection()->addStoreFilter($x2f);$x7a->addAttributeToFilter('status', 1);$x7a->addAttributeToFilter('type_id', array("\x69\x6e" => "\142u\156\x64\154e"));$x7a->addAttributeToFilter('visibility', array("\156i\x6e" => 1));$x7a->addAttributeToSelect($x57);$x7a->getSelect()->joinLeft($x79 . ' AS cpbs', 'cpbs.parent_product_id=e.entity_id', array('child_ids' => 'GROUP_CONCAT( DISTINCT cpbs.product_id)'));$x7a->getSelect()->joinLeft($x73 . ' AS stock', 'stock.product_id=e.entity_id', array('qty' => 'qty', 'is_in_stock' => 'is_in_stock'));$x7a->getSelect()->joinLeft($x74 . ' AS url', 'url.product_id=e.entity_id AND url.category_id IS NULL AND is_system=1 AND options<> "RP" AND url.store_id=' . $x2f, array('request_path' => 'request_path'));$x7a->getSelect()->joinLeft($x52 . ' AS categories', 'categories.product_id=e.entity_id');$x7a->getSelect()->joinLeft($x75 . ' AS categories_index', 'categories_index.category_id=categories.category_id AND  categories_index.product_id=categories.product_id AND categories_index.store_id=' . $x2f, array('categories_ids' => 'GROUP_CONCAT( DISTINCT categories_index.category_id)'));$x7a->getSelect()->group(array('e.entity_id'));$x83 = array();foreach ($x7a as $x7c) {foreach (explode(",", $x7c->getChildIds()) as $x7d) {$x83[$x7d] = $x7c;$x84[$x7d]['parent_id'] = $x7c->getId();$x84[$x7d]['parent_sku'] = $x7c->getSku();$x84[$x7d]['parent_request_path'] = $x7c->getRequestPath();$x84[$x7d]['categories_ids'] = $x7c->getCategories_ids();}}$this->bundle = $x83;if ($this->_debug) {echo "\074\142\162\x3e<\142\162\x3e---\055\x2d\x2d\x2d-\x2d\x2d\055\x2d \102U\116DL\x45 --\055\x2d--\x2d\055\055\x2d-\055\055\055\055\055\074\x62\162\076";echo $x7a->getSelect() . '<br><br>';print_r($x84);}$x85 = Mage::getModel("\145\x61\166\057\x65n\x74\151t\x79\x5f\x61\x74tr\151b\165te_\x73\145\164");$x86 = 0;$x7a = Mage::getModel('catalog/product')->getCollection()->addStoreFilter($x2f);$x7a->addAttributeToFilter('status', 1);$x7a->addAttributeToFilter('type_id', array("i\156" => $x37));$x7a->addAttributeToFilter('visibility', array("i\x6e" => $x38));$x87 = $x7a->count();$x88 = round($x87 / $this->_sqlSize) + 1;$x3b = '';while ($x86 < $x88) {$x7a = Mage::getModel('catalog/product')->getCollection()->addStoreFilter($x2f);$x7a->addAttributeToFilter('status', 1);$x7a->addAttributeToFilter('type_id', array("\x69n" => $x37));$x7a->addAttributeToFilter('visibility', array("\x69\x6e" => $x38));$x7a->addAttributeToSelect($x57);$x89 = '';$x7a->getSelect()->joinLeft($x73 . ' AS stock', 'stock.product_id=e.entity_id', array('qty' => 'qty', 'is_in_stock' => 'is_in_stock'));$x7a->getSelect()->joinLeft($x74 . ' AS url', 'url.product_id=e.entity_id AND url.category_id IS NULL AND is_system=1 AND options<> "RP" AND url.store_id=' . $x2f, array('request_path' => 'request_path'));$x7a->getSelect()->joinLeft($x52 . ' AS categories', 'categories.product_id=e.entity_id');$x7a->getSelect()->joinLeft($x75 . ' AS categories_index', 'categories_index.category_id=categories.category_id AND  categories_index.product_id=categories.product_id AND categories_index.store_id=' . $x2f, array('categories_ids' => 'GROUP_CONCAT(categories_index.category_id)'));if(Mage::getVersion()>=1.4) $x7a->getSelect()->joinLeft($x76. ' AS price_index','price_index.entity_id=e.entity_id AND customer_group_id=0 AND  price_index.website_id='.Mage::getModel('core/store')->load($x2f)->getWebsiteId(),array('min_price' => 'min_price','max_price' => 'max_price','tier_price' => 'tier_price','final_price' => 'final_price'));if (!empty($x89))$x7a->getSelect()->where($x89);$x7a->getSelect()->group(array('e.entity_id'));if ($this->_debug) {echo "\x3c\x62r\076\074b\162\076\055\x2d\055\x2d--\x2d\x2d\x2d\055-\055\x20S\x51L \055-\055\055\x2d\x2d\x2d\x2d\x2d\055---\x2d--\074b\162\076";print($x7a->getSelect());}$x7a->getSelect()->limit($this->_sqlSize, ($this->_sqlSize * $x86));$x86++;$x43 = 1;foreach ($x7a as $x20) {if ($this->_debug) {echo "<\142\x72\x3e<b\162>\055\x2d\x2d-\x2d\055\x2d-\055\x2d\055\055 PR\x4fDUCT\x20\133\x20S\113\125\040\x2d\x3e\040" . $x20->getSku() . "\040\x7c\040ID\x20\055\x3e\040" . $x20->getId() . "\x5d\055\055-\055-\x2d\055\055\x2d\055\x2d\055\055--<br>";echo "\x63a\x74\x65\x67\x6f\x72\x69\145\x73\x20\072\x20" . $x20->getCategoriesIds() . "\054\040\x52\x6f\157t\040id\x3a " . $x35 . "<b\x72>";foreach (explode(',', $x20->getCategoriesIds()) as $x19 => $x4b) {echo $x4b . "\x3d\x3e" . $x4a[$x4b]["pa\x74\150"] . "\074\142\x72>";}}if (!ini_get('safe_mode')) {set_time_limit(60);}$x15 = $x26;foreach ($x3e as $x19 => $x8a) {$x1a = "";switch ($x8a['pattern']) {case '{attribute_set_name}' :$x85->load($x20->getAttributeSetId());$x8b= $x85->getAttributeSetName();$x1a = $x8b;break;case '{inc}' :$x1a = $x43;break; case '{id}' :$x8c = $this->x0f($x8a['reference'], $x20);$x1a = $x8c->getId();break;case '{visibility}' :$x8c = $this->x0f($x8a['reference'], $x20);$x1a = $x8c->getVisibility();switch ($x1a) {case '1' : $x1a = "\116o\164\040\126\x69sibl\x65\x20I\x6e\x64\151vi\x64\x75\x61\x6c\x6c\171"; break;case '2' : $x1a = "\103\x61ta\x6c\157\147"; break;case '3' : $x1a = "\123\145\141\162c\150"; break;case '4' : $x1a = "\103a\x74\x61\x6c\x6f\147\x2c\x20\x53e\x61\162\143\x68"; break;default : break;}break;case '{product_type}' :$x8c = $this->x0f($x8a['reference'], $x20);$x1a = $x8c->getTypeId();break;case '{final_price}' :$x8c = $this->x0f($x8a['reference'], $x20);$x0b = Mage::getModel('catalog/product')->load($x8c->getId())->getFinalPrice();(!isset($x8a['options'][1])) ? $x10 = false : $x10 = $x8a['options'][1];$x1a = $this->x0c($x0b, $x34, $x8c->getTaxClassId(), $x10);(!isset($x8a['options'][0])) ? $x0c = $x31 : $x0c = $x8a['options'][0];$x1a = $this->x0b($x1a, $x0c);$x1a = number_format($x1a, 2, '.', '');break;case '{tier_price}' :$x8c = $this->x0f($x8a['reference'], $x20);$x0b=$x8c->getTierPrice();(!isset($x8a['options'][1])) ? $x10 = false : $x10 = $x8a['options'][1];$x1a = $this->x0c($x0b, $x34, $x8c->getTaxClassId(), $x10);(!isset($x8a['options'][0])) ? $x0c = $x31 : $x0c = $x8a['options'][0];$x1a = $this->x0b($x1a, $x0c);$x1a = number_format($x1a, 2, '.', '');break;case '{min_price}' :$x8c = $this->x0f($x8a['reference'], $x20);$x0b=$x8c->getMinPrice();(!isset($x8a['options'][1])) ? $x10 = false : $x10 = $x8a['options'][1];$x1a = $this->x0c($x0b, $x34, $x8c->getTaxClassId(), $x10);(!isset($x8a['options'][0])) ? $x0c = $x31 : $x0c = $x8a['options'][0];$x1a = $this->x0b($x1a, $x0c);$x1a = number_format($x1a, 2, '.', '');break; case '{max_price}' :$x8c = $this->x0f($x8a['reference'], $x20);$x0b=$x8c->getMaxPrice();(!isset($x8a['options'][1])) ? $x10 = false : $x10 = $x8a['options'][1];$x1a = $this->x0c($x0b, $x34, $x8c->getTaxClassId(), $x10);(!isset($x8a['options'][0])) ? $x0c = $x31 : $x0c = $x8a['options'][0];$x1a = $this->x0b($x1a, $x0c);$x1a = number_format($x1a, 2, '.', '');break;case '{normal_price}' :$x8c = $this->x0f($x8a['reference'], $x20);if ($x8c->type_id == 'bundle')$x0b = $x8c->price;else {$x0b = $x8c->getPrice();}(!isset($x8a['options'][1])) ? $x10 = false : $x10 = $x8a['options'][1];$x1a = $this->x0c($x0b, $x34, $x8c->getTaxClassId(), $x10);(!isset($x8a['options'][0])) ? $x0c = $x31 : $x0c = $x8a['options'][0];$x1a = $this->x0b($x1a, $x0c);$x1a = number_format($x1a, 2, '.', '');break;case '{price}' :$x8c = $this->x0f($x8a['reference'], $x20);if ($x8c->getSpecialFromDate() && !$x8c->getSpecialToDate()) {if ($x8c->getSpecialFromDate() <= date("Y\055m-d\040\x48\x3a\x69\072s")) {if ($x8c->type_id == "b\x75\x6e\x64\x6ce") {if (($x8c->price_type || (!$x8c->price_type && $x8c->special_price < $x8c->price)) && $x8c->special_price > 0) {if ($x8c->price_type)$x0b = number_format($x8c->price * $x8c->special_price / 100, 2, "\x2e", "");else$x0b = $x8c->special_price;}else {$x0b = $x8c->price;}}else($x8c->getSpecial_price() && $x8c->getSpecial_price() < $x8c->getPrice()) ? $x0b = $x8c->getSpecialPrice() : $x0b = $x8c->getPrice();}else {if ($x8c->type_id == "\x62\165nd\x6c\x65")$x0b = $x8c->price;else {$x0b = $x8c->getPrice();}}} elseif ($x8c->getSpecialFromDate() && $x8c->getSpecialToDate()) {if ($x8c->getSpecialFromDate() <= date("\x59\x2dm\x2d\x64\x20H\072\x69\072\163") && date("\x59-\x6d\x2d\x64\x20\110\x3ai\x3as") < $x8c->getSpecialToDate()) {if ($x8c->type_id == "\142u\x6e\144le") {if (($x8c->price_type || (!$x8c->price_type && $x8c->special_price < $x8c->price)) && $x8c->special_price > 0) {if ($x8c->price_type)$x0b = number_format($x8c->price * $x8c->special_price / 100, 2, "\056", "");else {$x0b = $x8c->special_price;}} else {$x0b = $x8c->price;}} else {($x8c->getSpecial_price() && $x8c->getSpecial_price() < $x8c->getPrice()) ? $x0b = $x8c->getSpecialPrice() : $x0b = $x8c->getPrice();}} else {if ($x8c->type_id == "\x62\x75n\x64\154\145") {$x0b = $x8c->price;} else {$x0b = $x8c->getPrice();}}} else {if ($x8c->type_id == "b\x75n\144le") {if (($x8c->price_type || (!$x8c->price_type && $x8c->special_price < $x8c->price)) && $x8c->special_price > 0) {if ($x8c->price_type) {$x0b = number_format($x8c->price * $x8c->special_price / 100, 2, "\x2e", "");} else {$x0b = $x8c->special_price;}} else {$x0b = $x8c->price;}} else {($x8c->getSpecial_price() && $x8c->getSpecial_price() < $x8c->getPrice()) ? $x0b = $x8c->getSpecialPrice() : $x0b = $x8c->getPrice();}}(!isset($x8a['options'][1])) ? $x10 = false : $x10 = $x8a['options'][1];$x1a = $this->x0c($x0b, $x34, $x8c->getTaxClassId(), $x10);(!isset($x8a["o\160\x74\x69o\156s"][0])) ? $x0c = $x31 : $x0c = $x8a["\x6f\x70\164\x69\157n\x73"][0];$x1a = $this->x0b($x1a, $x0c);$x1a = number_format($x1a, 2, "\056", "");;break;case "{\151\x73_s\160e\143\151\x61l_\x70\162\x69ce\x7d" :$x8c = $this->x0f($x8a['reference'], $x20);(!isset($x8a["opt\x69\x6fns"][0])) ? $x8d = 1 : $x8d = $x8a["o\x70\x74\151\x6fns"][0];(!isset($x8a["\x6f\x70\164\151\157\156\x73"][1])) ? $x8e = 0 : $x8e = $x8a["\x6f\x70t\x69\x6fn\x73"][1];if ($x8c->getSpecialFromDate() && !$x8c->getSpecialToDate()) {if ($x8c->getSpecialFromDate() <= date("Y\x2d\x6d-d \x48:\151\x3a\163")) {if ($x8c->type_id == "\x62\x75\156\144\x6ce")(($x8c->price_type || (!$x8c->price_type && $x8c->special_price < $x8c->price)) && $x8c->special_price > 0 ) ? $x1a = $x8d : $x1a = $x8e;else {($x8c->getSpecial_price() && $x8c->getSpecial_price() < $x8c->getPrice()) ? $x1a = $x8d : $x1a = $x8e;}} else {if ($x8c->type_id == "b\165\156dl\x65") {$x1a = $x8e;} else {$x1a = $x8e;}}} elseif ($x8c->getSpecialFromDate() && $x8c->getSpecialToDate()) {if ($x8c->getSpecialFromDate() <= date("\131\055m\055\x64\040H\x3a\x69:s") && date("\131\055m-\144\x20H\072\151\072\x73") < $x8c->getSpecialToDate()) {if ($x8c->type_id == "\142\165nd\154\145") {(($x8c->price_type || (!$x8c->price_type && $x8c->special_price < $x8c->price)) && $x8c->special_price > 0 ) ? $x1a = $x8d : $x1a = $x8e;} else {($x8c->getSpecial_price() && $x8c->getSpecial_price() < $x8c->getPrice()) ? $x1a = $x8d : $x1a = $x8e;}} else {if ($x8c->type_id == "b\x75n\x64l\145") {$x1a = $x8e;} else {$x1a = $x8e;}}} else {if ($x8c->type_id == "\x62\165n\x64\154\x65") {(($x8c->price_type || (!$x8c->price_type && $x8c->special_price < $x8c->price)) && $x8c->special_price > 0 ) ? $x1a = $x8d : $x1a = $x8e;} else {($x8c->getSpecial_price() && $x8c->getSpecial_price() < $x8c->getPrice()) ? $x1a = $x8d : $x1a = $x8e;}}break;case "\173\x73\x70e\143\151al\137\160\x72\151\143\x65\x7d" :$x8c = $this->x0f($x8a['reference'], $x20);if ($x8c->type_id == 'bundle') {if ($x8c->price_type) {$x0b = number_format($x8c->price * $x8c->special_price / 100, 2, "\056", "");} else {$x0b = $x8c->special_price;}} else {$x0b = $x8c->getSpecial_price();}(!isset($x8a['options'][1])) ? $x10 = false : $x10 = $x8a['options'][1];if ($x0b > 0) {$x1a = $this->x0c($x0b, $x34, $x8c->getTaxClassId(), $x10);(!isset($x8a['options'][0])) ? $x0c = $x31 : $x0c = $x8a['options'][0];$x1a = $this->x0b($x1a, $x0c);$x1a = number_format($x1a, 2, '.', '');;} else {$x1a = "";}break; case "{im\141g\x65}" :$x8c = $this->x0f($x8a['reference'], $x20);$x8f = $x8c->getImage();if (!isset($x8a['options'][0]) || $x8a['options'][0] == 0) {if ($x8c->getImage() && $x8c->getImage() != 'no_selection') {$x90 = 'catalog/product/' . $x8c->getImage();$x1a = $x33 . str_replace('//', '/', $x90);} else {$x1a = $x33 . '/catalog/product/placeholder/' . $x30;}} elseif (isset($x72[$x8c->getId()]['src'][$x8a['options'][0] - 1]) && $x8a['options'][0] > 0) {if ($x72[$x8c->getId()]['src'][$x8a['options'][0] - 1] != $x8f) {$x90 = 'catalog/product/' . $x72[$x8c->getId()]['src'][$x8a['options'][0] - 1];$x1a = $x33 . str_replace('//', '/', $x90);}}break; case "\173u\162l\175" :$x8c = $this->x0f($x8a['reference'], $x20);if ($x8c->getRequest_path()) {$x1a = $x32 . $x24 . $x8c->getRequest_path();} else {$x1a = $x8c->getProductUrl();}break;case "{\165\x72i}" :$x8c = $this->x0f($x8a['reference'], $x20);if ($x8c->getRequest_path()) {$x1a = $x8c->getRequest_path();} else {$x1a = str_replace($x32, '', $x8c->getProductUrl());}break;case '{is_in_stock}' :$x8c = $this->x0f($x8a['reference'], $x20);(!isset($x8a['options'][0])) ? $x8d = 1 : $x8d = $x8a['options'][0];(!isset($x8a['options'][1])) ? $x8e = 0 : $x8e = $x8a['options'][1];($x8c->getIs_in_stock() > 0) ? $x1a = $x8d : $x1a = $x8e;break;case '{stock_status}' :$x8c = $this->x0f($x8a['reference'], $x20);($x8c->getIs_in_stock() > 0) ? $x1a = 'in stock' : $x1a = 'out of stock';break;case '{qty}' :$x8c = $this->x0f($x8a['reference'], $x20);(!isset($x8a['options'][0])) ? $x91 = 0 : $x91 = $x8a['options'][0];if ($x20->type_id == "c\157\156\146i\x67\x75\162\x61bl\145") {$x1a = $x7f[$x20->getId()];$x1a = number_format($x1a, $x91, '.', '');} else if ($x8a['reference'] == "\x63\x6f\156\x66\x69\x67u\162\x61b\x6c\x65") {$x1a = number_format($x7f[$x8c->getId()], $x91, '.', '');} else {$x1a = number_format($x8c->getQty(), $x91, '.', '');}break;case "{cate\x67o\162\x69\x65\163\x7d" :$x8c = $this->x0f($x8a['reference'], $x20);(!isset($x8a['options'][0]) || !$x8a['options'][0] || $x8a['options'][0] == 'INF') ? $x92 = INF : $x92 = $x8a['options'][0];(!isset($x8a['options'][1])) ? $x93 = 1 : $x93 = $x8a['options'][1];(!isset($x8a['options'][2]) || !$x8a['options'][2] || $x8a['options'][2] == 'INF') ? $x94 = INF : $x94 = $x8a['options'][2];$x95 = 0;$x1a = '';$x96 = '';foreach (explode(',', $x8c->getCategoriesIds()) as $x19 => $x4b) {if (isset($x4a[$x4b]) && $x95 < $x92 && (in_array($x4a[$x4b]["\x70\141\164\150"], $x36) || $x36[0] == "*")) {$x97 = 0;$x98 = explode('/', $x4a[$x4b]["\x70\x61\164\x68"]);if (in_array($x35, $x98)) {$x99 = "";if ($x95 > 0) {$x96 = ",";}foreach ($x98 as $x9a) {if (isset($x4a[$x9a])) {if ($x4a[$x9a]['level'] > $x93 && $x97 < $x94) {if ($x97 > 0) {$x99.=' > ';}$x99.= ( $x4a[$x9a]['name']);$x97++;}}}$x9b = "";if (!empty($x99)) {$x1a.=$x96 . $x99 . $x9b;$x95++;}}}};break; case "\173\x72evi\145\167\x5f\143\x6f\x75\156\x74\x7d":$x8c = $this->x0f($x8a['reference'], $x20);$x1a = "";(isset($x8a["o\160\x74\151on\x73"][0]) && $x8a["o\x70\x74\x69\x6f\156s"][0] == "\052" ) ? $x9c = 0 : $x9c = $x2f;if (isset($x6c[$x8c->getId()][$x9c]["\x63\x6f\165\x6et"])) {$x9d = $x6c[$x8c->getId()][$x9c]["c\x6f\165\156\164"];if (isset($x9d)) {$x1a.=$x9d;}}break;case "\173\162\145\x76i\145w_\x61\x76e\162\x61g\x65\175":$x8c = $this->x0f($x8a['reference'], $x20);$x1a = "";(isset($x8a["\157\x70t\151on\x73"][0]) && $x8a["op\x74i\157n\163"][0] == "\x2a" ) ? $x9c = 0 : $x9c = $x2f;(!isset($x8a["o\x70\164\151\x6f\x6e\x73"][1]) || !$x8a["\157\160\164\151\157\156\163"][1]) ? $x9e = 5 : $x9e = $x8a["o\160t\x69\157n\163"][1];if (isset($x6c[$x8c->getId()][$x9c]["\163\x63\157\162\145"])) {$x9f = number_format($x6c[$x8c->getId()][$x9c]["sc\157\162e"] * $x9e / 100, 2, ".", "");if (isset($x9f)) {$x1a.=$x9f;}}break;default :$x8c = $this->x0f($x8a['reference'], $x20);if (in_array($x8a['name'], $x57)) {if (in_array($x58[$x8a['name']], array('select', 'multiselect'))) {eval('$xa0 =($x8c->' . $x8a['methodName'] . "\x29\073");$xa1 = explode(',', $xa0);if (count($xa1) > 1) {$x1a = array();foreach ($xa1 as $xa2) {echo $xa3;if (isset($x5d[$xa2][$x2f]))$x1a[] = $x5d[$xa2][$x2f];else {if (isset($x5d[$xa2][0]))$x1a[] = $x5d[$xa2][0];}}}else {if (isset($x5d[$xa1[0]][$x2f]))$x1a = $x5d[$xa1[0]][$x2f];else {if (isset($x5d[$xa1[0]][0]))$x1a = $x5d[$xa1[0]][0];}}}else {eval('$x1a =($x8c->' . $x8a['methodName'] . ");");}}if (in_array(@$x54[$x8a['name']], $x54)) {$x1a = $x54[$x8a['name']];}$xa4 = 0;if (count($x8a['options']) > 0) {while (isset($x8a['options'][$xa4])) {switch ($x8a['options'][$xa4]) {case "\163u\142\x73\164\162" :if (isset($x8a['options'][$xa4 + 1]) && strlen($x1a) > $x8a['options'][$xa4 + 1]) {$x1a = substr($x1a, 0, $x8a['options'][$xa4 + 1] - 3);$xa5 = strrpos($x1a, "\040");$x1a = substr($x1a, 0, $xa5) . $x8a['options'][$xa4 + 2];}$xa4++;$xa4++;break;case "\x68tm\x6c\145\156\164\x69t\x69\145s" :$x1a = htmlspecialchars(($x1a));break;case "\163\164\162i\x70\x5fta\147\163" :$xa6 = "\040";$x1a = preg_replace('!\<br /\>!isU', $xa6, $x1a);$x1a = preg_replace('!\<br/\>!isU', $xa6, $x1a);$x1a = preg_replace('!\<br>!isU', $xa6, $x1a);$x1a = strip_tags($x1a);break;case "\151\x6d\160lode" :$x1a = (is_array($x1a)) ? implode($x8a['options'][$xa4 + 1], $x1a) : $x1a;$xa4++;break;case "\x66l\157a\164" :$x1a = number_format($x1a, $x8a['options'][$xa4 + 1], '.', '');$xa4++;break;case "\x68\164\155\154_\145\156ti\164\x79\x5f\144\145\x63\157\144\x65" :$x1a = html_entity_decode($x1a, ENT_QUOTES, 'UTF-8');break;case "\151\156\154\151\x6e\x65":$x1a = preg_replace('/(\r\n|\n|\r|\r\n)/s', '', $x1a);break;case "\163\164rt\x6fl\157\167er":$x1a = mb_strtolower($x1a, "\125\x54\x468");break;case "st\162\164\157\165\x70\x70er":$x1a = mb_strtoupper($x1a, "\x55T\x468");break;default :break;}$xa4++;}}break;}$x1a = str_replace(array("<", ">"), array("{\050[", "]\x29\x7d"), $x1a);$x15 = str_replace($x8a['fullpattern'], $x1a, $x15);}$x15 = $this->execPhpScript($x15, $x20);$x15 = $this->x0e($x15);$x15 = $this->x0d($x15);$x15 = str_replace(array("\173\x28\133", "\135\051\175"), array("\x3c", "\x3e"), $x15);if ($x36[0] != '*') {$x97 = 0;foreach (explode("\054", $x20->getCategoriesIds()) as $x19 => $x4b) {if (isset($x4a[$x4b])) {if (in_array($x4a[$x4b]['path'], $x36)) {$x97++;}}};if ($x97 < 1) {$x15 = '';}}if (!empty($x15)) {$x3b.="\n" . $x15 . "";$x3b.= ("\n");$x43++;} $x3c.=$x3b."";$x3b = '';if ($this->_limit && $x43 > $this->_limit) {break 2;}}}unset($x7a);$x3c.=$x3b."\n\x3c\x2ff\145ed\x49te\155\163>";if (!$this->_debug) {return $x3c;} elseif ($this->_debug) {echo "<\142r\076\074\x62\162>\055-\055-\x2d\x2d--\055\x2d\x2d\055\x20\x58ML\040\117UTPU\x54\x20\055\055-\055\055\055\x2d\x2d\055\x2d\055\055\055\x2d\055-<\142\x72\x3e";$xa7 = "\x3cp\162\x65\076" . htmlentities($x3c) . "<\x2f\160r\x65\x3e";return;}}

}
?>
